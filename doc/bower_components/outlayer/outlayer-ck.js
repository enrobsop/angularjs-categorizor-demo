/*!
 * Outlayer v1.1.10
 * the brains and guts of a layout library
 * MIT license
 */(function(e){"use strict";function s(e,t){for(var n in t)e[n]=t[n];return e}function u(e){return o.call(e)==="[object Array]"}function a(e){var t=[];if(u(e))t=e;else if(e&&typeof e.length=="number")for(var n=0,r=e.length;n<r;n++)t.push(e[n]);else t.push(e);return t}function c(e,t){var n=l(t,e);n!==-1&&t.splice(n,1)}function h(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()}function p(o,u,l,p,d,v){function y(e,r){typeof e=="string"&&(e=t.querySelector(e));if(!e||!f(e)){n&&n.error("Bad "+this.constructor.namespace+" element: "+e);return}this.element=e;this.options=s({},this.options);this.option(r);var i=++m;this.element.outlayerGUID=i;g[i]=this;this._create();this.options.isInitLayout&&this.layout()}function b(e,t){e.prototype[t]=s({},y.prototype[t])}var m=0,g={};y.namespace="outlayer";y.Item=v;y.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};s(y.prototype,l.prototype);y.prototype.option=function(e){s(this.options,e)};y.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);s(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()};y.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)};y.prototype._itemize=function(e){var t=this._filterFindItemElements(e),n=this.constructor.Item,r=[];for(var i=0,s=t.length;i<s;i++){var o=t[i],u=new n(o,this);r.push(u)}return r};y.prototype._filterFindItemElements=function(e){e=a(e);var t=this.options.itemSelector,n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r];if(!f(s))continue;if(t){d(s,t)&&n.push(s);var o=s.querySelectorAll(t);for(var u=0,l=o.length;u<l;u++)n.push(o[u])}else n.push(s)}return n};y.prototype.getItemElements=function(){var e=[];for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].element);return e};y.prototype.layout=function(){this._resetLayout();this._manageStamps();var e=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e);this._isLayoutInited=!0};y.prototype._init=y.prototype.layout;y.prototype._resetLayout=function(){this.getSize()};y.prototype.getSize=function(){this.size=p(this.element)};y.prototype._getMeasurement=function(e,t){var n=this.options[e],r;if(!n)this[e]=0;else{typeof n=="string"?r=this.element.querySelector(n):f(n)&&(r=n);this[e]=r?p(r)[t]:n}};y.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e);this._layoutItems(e,t);this._postLayout()};y.prototype._getItemsForLayout=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];i.isIgnored||t.push(i)}return t};y.prototype._layoutItems=function(e,t){function r(){n.emitEvent("layoutComplete",[n,e])}var n=this;if(!e||!e.length){r();return}this._itemsOn(e,"layout",r);var i=[];for(var s=0,o=e.length;s<o;s++){var u=e[s],a=this._getItemLayoutPosition(u);a.item=u;a.isInstant=t||u.isLayoutInstant;i.push(a)}this._processLayoutQueue(i)};y.prototype._getItemLayoutPosition=function(){return{x:0,y:0}};y.prototype._processLayoutQueue=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];this._positionItem(r.item,r.x,r.y,r.isInstant)}};y.prototype._positionItem=function(e,t,n,r){r?e.goTo(t,n):e.moveTo(t,n)};y.prototype._postLayout=function(){var e=this._getContainerSize();if(e){this._setContainerMeasure(e.width,!0);this._setContainerMeasure(e.height,!1)}};y.prototype._getContainerSize=i;y.prototype._setContainerMeasure=function(e,t){if(e===undefined)return;var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth);e=Math.max(e,0);this.element.style[t?"width":"height"]=e+"px"};y.prototype._itemsOn=function(e,t,n){function o(){r++;r===i&&n.call(s);return!0}var r=0,i=e.length,s=this;for(var u=0,a=e.length;u<a;u++){var f=e[u];f.on(t,o)}};y.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)};y.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored};y.prototype.stamp=function(e){e=this._find(e);if(!e)return;this.stamps=this.stamps.concat(e);for(var t=0,n=e.length;t<n;t++){var r=e[t];this.ignore(r)}};y.prototype.unstamp=function(e){e=this._find(e);if(!e)return;for(var t=0,n=e.length;t<n;t++){var r=e[t];c(r,this.stamps);this.unignore(r)}};y.prototype._find=function(e){if(!e)return;typeof e=="string"&&(e=this.element.querySelectorAll(e));e=a(e);return e};y.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length)return;this._getBoundingRect();for(var e=0,t=this.stamps.length;e<t;e++){var n=this.stamps[e];this._manageStamp(n)}};y.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}};y.prototype._manageStamp=i;y.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,r=p(e),i={left:t.left-n.left-r.marginLeft,top:t.top-n.top-r.marginTop,right:n.right-t.right-r.marginRight,bottom:n.bottom-t.bottom-r.marginBottom};return i};y.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)};y.prototype.bindResize=function(){if(this.isResizeBound)return;o.bind(e,"resize",this);this.isResizeBound=!0};y.prototype.unbindResize=function(){o.unbind(e,"resize",this);this.isResizeBound=!1};y.prototype.onresize=function(){function t(){e.resize();delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)};y.prototype.resize=function(){var e=p(this.element),t=this.size&&e;if(t&&e.innerWidth===this.size.innerWidth)return;this.layout()};y.prototype.addItems=function(e){var t=this._itemize(e);t.length&&(this.items=this.items.concat(t));return t};y.prototype.appended=function(e){var t=this.addItems(e);if(!t.length)return;this.layoutItems(t,!0);this.reveal(t)};y.prototype.prepended=function(e){var t=this._itemize(e);if(!t.length)return;var n=this.items.slice(0);this.items=t.concat(n);this._resetLayout();this._manageStamps();this.layoutItems(t,!0);this.reveal(t);this.layoutItems(n)};y.prototype.reveal=function(e){var t=e&&e.length;if(!t)return;for(var n=0;n<t;n++){var r=e[n];r.reveal()}};y.prototype.hide=function(e){var t=e&&e.length;if(!t)return;for(var n=0;n<t;n++){var r=e[n];r.hide()}};y.prototype.getItem=function(e){for(var t=0,n=this.items.length;t<n;t++){var r=this.items[t];if(r.element===e)return r}};y.prototype.getItems=function(e){if(!e||!e.length)return;var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n],s=this.getItem(i);s&&t.push(s)}return t};y.prototype.remove=function(e){e=a(e);var t=this.getItems(e);if(!t||!t.length)return;this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])});for(var n=0,r=t.length;n<r;n++){var i=t[n];i.remove();c(i,this.items)}};y.prototype.destroy=function(){var e=this.element.style;e.height="";e.position="";e.width="";for(var t=0,n=this.items.length;t<n;t++){var i=this.items[t];i.destroy()}this.unbindResize();delete this.element.outlayerGUID;r&&r.removeData(this.element,this.constructor.namespace)};y.data=function(e){var t=e&&e.outlayerGUID;return t&&g[t]};y.create=function(e,i){function o(){y.apply(this,arguments)}Object.create?o.prototype=Object.create(y.prototype):s(o.prototype,y.prototype);o.prototype.constructor=o;b(o,"options");s(o.prototype.options,i);o.namespace=e;o.data=y.data;o.Item=function(){v.apply(this,arguments)};o.Item.prototype=new v;u(function(){var i=h(e),s=t.querySelectorAll(".js-"+i),u="data-"+i+"-options";for(var a=0,f=s.length;a<f;a++){var l=s[a],c=l.getAttribute(u),p;try{p=c&&JSON.parse(c)}catch(d){n&&n.error("Error parsing "+u+" on "+l.nodeName.toLowerCase()+(l.id?"#"+l.id:"")+": "+d);continue}var v=new o(l,p);r&&r.data(l,e,v)}});r&&r.bridget&&r.bridget(e,o);return o};y.Item=v;return y}var t=e.document,n=e.console,r=e.jQuery,i=function(){},o=Object.prototype.toString,f=typeof HTMLElement=="object"?function(t){return t instanceof HTMLElement}:function(t){return t&&typeof t=="object"&&t.nodeType===1&&typeof t.nodeName=="string"},l=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1};typeof define=="function"&&define.amd?define(["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],p):e.Outlayer=p(e.eventie,e.docReady,e.EventEmitter,e.getSize,e.matchesSelector,e.Outlayer.Item)})(window);